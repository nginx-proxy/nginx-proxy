nginx-proxy:
  image: jwilder/nginx-proxy:test
  volumes:
    - /var/run/docker.sock:/tmp/docker.sock:ro
    - ../lib/ssl/dhparam.pem:/etc/nginx/dhparam/dhparam.pem:ro
    - ./my_custom_proxy_settings.conf:/etc/nginx/vhost.d/default_location:ro
    - ./my_custom_proxy_settings_bar.conf:/etc/nginx/vhost.d/web3.nginx-proxy.local_location:ro

web1:
  image: web
  expose:
    - "81"
  environment:
    WEB_PORTS: 81
  labels:
    '@proxy/virtualHost': web1.nginx-proxy.local

web2:
  image: web
  expose:
    - "82"
  environment:
    WEB_PORTS: 82
  labels:
    '@proxy/virtualHost': web2.nginx-proxy.local

web3:
  image: web
  expose:
    - "83"
  environment:
    WEB_PORTS: 83
  labels:
    '@proxy/virtualHost': web3.nginx-proxy.local
